<!DOCTYPE html>
<html>

<head>
	<meta name="viewport" content="width=device-width; initial-scale=1.0">
	<link rel="stylesheet" type="text/css" href="./static/style.css"/>
	<meta name="description" content="">
	<meta name="keywords" content="">
	<title>FlaskFlights</title>
</head>
<body>
	<nav>
		<h1 class = "navigator-header">FlaskFlights</h2>
		<div class = "login">
		{% if not username %}
			<a class = "login" href="/login">LOGIN</a>
			<a class = "login" href="/register">REGISTER</a>
		{% endif %}
		{% if username %}
			<a class = "login" href="/logout">LOGOUT</a>
		{% endif %}
		</div>
	</nav>
	<main>
		<form action="/post" method="POST">
			{% if username %}
			<h2>Welcome {{username}}</h1>
			
			<div class = "search-results">
				<p><strong>My future flights</strong></p>
				<table>
					<th>Airline Name</th>
					<th>Flight Number</th>
					<th>Departure Time</th>
					<th>Arrival Time</th>
					<th>Action</th>
				
				{% for flight in myFutureFlights %}
					<tr>
						<td>{{flight['name']}}</td>
						<td>{{flight['num']}}</td>
						<td>{{flight['depTime']}}</td>
						<td>{{flight['arrTime']}}</td>
						<td>
							<form action="/deleteTicket" method="POST">
								<p class = "center-aligned-button"><button type="submit" name = "ticket_id" value = "{{flight['ticket_id']}}">Cancel</button></p>
							</form>
						</td>
					</tr>
				{% endfor %}
				</table>
			</div>
			{% endif %}
		</form>
		<div class = "flight-search">
			{% if not admin %}
				<h2>Book your flight today!</h2>
			{% else %}
				<h2>Search for a flight!</h2>
			{% endif %}
			
			
			
			<style type="text/css">
				table, th, td{
					border: 1px solid black;
				}
			</style>
			
			<form action="/lookUpFlight" method="POST">
				
				<div class = "flight-search-fields">
					<div class = "flight-search-fields-left">
						<p>Departure Airport</p>
						<p><input maxlength="255" name="departureAirport" placeholder="Departure Airport" size="30" type="search"></p>
						<p>Departure Date</p>
						<p><input maxlength="255" name="departureDate" placeholder="Departure Date" size="30" type="date"></p>
					</div>
					<div class = "flight-search-fields-right">
						<p>Arrival Airport</p>
						<p><input maxlength="255" name="arrivalAirport" placeholder="Arrival Airport" size="30" type="search"></p>
						<p>Return Date</p>
						<p><input maxlength="255" name="returnDate" placeholder="Return Date" size="30" type="date"></p>
					</div>

				</div>
				
				<p class = "center-aligned-button"><input type="submit" value="Search Flights"></p>

				
				<!--{% if error %}
					<p class="error"><strong>Error:</strong> {{error}}</p>
				{% endif %}-->
			</form>
			
			
		</div>

		{% if flights %}
		<div class = "search-results">
			<table>
				<th>Airline Name</th>
				<th>Flight Number</th>
				<th>Departure Time</th>
				<th>Arrival Time</th>
				{% if username %}
					{% if not admin %}
						<th>Action</th>
					{% endif %}
				{% endif %}
			
			{% for flight in flights %}
				<tr>
					<td>{{flight['name']}}</td>
					<td>{{flight['num']}}</td>
					<td>{{flight['depTime']}}</td>
					<td>{{flight['arrTime']}}</td>
					{% if username %}
						{% if not admin %}
							<td>
								<form action="/selectTicket" method="POST">
									<p class = "center-aligned-button"><button type="submit" name = "flight_num" value = "{{flight['num']}}_{{flight['name']}}_{{flight['depTime']}}">Select</button></p>
								</form>
							</td>
						{% endif %}
						{% if admin %}
						<p>Fuck</p>
						{% endif %}
					{% endif %}
				</tr>
			{% endfor %}
			</table>
		</div>
		{% endif %}

		{% if username %}
		<div class = "search-results">
			<p><strong>My past flights</strong></p>
			<table>
				<th>Airline Name</th>
				<th>Flight Number</th>
				<th>Departure Time</th>
				<th>Arrival Time</th>
				<th>Action</th>
			
			{% for flight in myPastFlights %}
				<tr>
					<td>{{flight['name']}}</td>
					<td>{{flight['num']}}</td>
					<td>{{flight['depTime']}}</td>
					<td>{{flight['arrTime']}}</td>
					<td>
						<form action="/reviewTicket" method="POST">
							<p class = "center-aligned-button"><button type="submit" name = "ticket_id" value = "{{flight['ticket_id']}}">Review</button></p>
						</form>
					</td>
				</tr>
			{% endfor %}
			</table>
		</div>
		{% endif %}

		{% if admin %}
			<h2> Schedule maintenance today! </h2>
			<a href="maintenance"> Schedule Maintenance!</a>
		{% endif %}

	</main>
</body>

</html>